
> service-manager@0.0.0 lint
> eslint . --format json

[{"filePath":"/home/kuba-ai/service-manager/eslint.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/kuba-ai/service-manager/postcss.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/kuba-ai/service-manager/src/App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/kuba-ai/service-manager/src/components/clients/AddClientDialog.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":45,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":45,"endColumn":19}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\nimport { useCreateClient } from '@/lib/hooks/useClients';\nimport { Input } from '@/components/ui/input';\nimport { Button } from '@/components/ui/button';\nimport { DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { useToast } from '@/lib/hooks/useToast';\n\ninterface AddClientDialogProps {\n  onClose: () => void;\n}\n\nexport default function AddClientDialog({ onClose }: AddClientDialogProps) {\n  const createClient = useCreateClient();\n  const { toast } = useToast();\n  const [formData, setFormData] = useState({\n    name: '',\n    company: '',\n    email: '',\n    phone: '',\n    address: '',\n    nip: '',\n    notes: '',\n  });\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!formData.name || !formData.phone) {\n      toast({\n        title: 'Błąd',\n        description: 'Imię i telefon są wymagane',\n        variant: 'destructive',\n      });\n      return;\n    }\n\n    try {\n      await createClient(formData);\n      toast({\n        title: 'Sukces',\n        description: 'Klient został dodany',\n        variant: 'success',\n      });\n      onClose();\n    } catch (error) {\n      toast({\n        title: 'Błąd',\n        description: 'Wystąpił błąd podczas dodawania klienta',\n        variant: 'destructive',\n      });\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"space-y-4\">\n      <DialogHeader>\n        <DialogTitle>Nowy klient</DialogTitle>\n      </DialogHeader>\n\n      <div className=\"space-y-4\">\n        <div>\n          <label className=\"text-sm font-medium\">Imię i nazwisko *</label>\n          <Input\n            required\n            value={formData.name}\n            onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n            placeholder=\"Jan Kowalski\"\n          />\n        </div>\n\n        <div>\n          <label className=\"text-sm font-medium\">Firma</label>\n          <Input\n            value={formData.company}\n            onChange={(e) => setFormData({ ...formData, company: e.target.value })}\n            placeholder=\"Nazwa firmy\"\n          />\n        </div>\n\n        <div>\n          <label className=\"text-sm font-medium\">Telefon *</label>\n          <Input\n            required\n            type=\"tel\"\n            value={formData.phone}\n            onChange={(e) => setFormData({ ...formData, phone: e.target.value })}\n            placeholder=\"+48 123 456 789\"\n          />\n        </div>\n\n        <div>\n          <label className=\"text-sm font-medium\">Email</label>\n          <Input\n            type=\"email\"\n            value={formData.email}\n            onChange={(e) => setFormData({ ...formData, email: e.target.value })}\n            placeholder=\"jan@example.com\"\n          />\n        </div>\n\n        <div>\n          <label className=\"text-sm font-medium\">Adres</label>\n          <Input\n            value={formData.address}\n            onChange={(e) => setFormData({ ...formData, address: e.target.value })}\n            placeholder=\"Warszawa, ul. Długa 1\"\n          />\n        </div>\n\n        <div>\n          <label className=\"text-sm font-medium\">NIP</label>\n          <Input\n            value={formData.nip}\n            onChange={(e) => setFormData({ ...formData, nip: e.target.value })}\n            placeholder=\"1234567890\"\n          />\n        </div>\n\n        <div>\n          <label className=\"text-sm font-medium\">Notatki</label>\n          <Input\n            value={formData.notes}\n            onChange={(e) => setFormData({ ...formData, notes: e.target.value })}\n            placeholder=\"Dodatkowe informacje...\"\n          />\n        </div>\n      </div>\n\n      <div className=\"flex justify-end gap-2\">\n        <Button type=\"button\" variant=\"outline\" onClick={onClose}>\n          Anuluj\n        </Button>\n        <Button type=\"submit\">Dodaj klienta</Button>\n      </div>\n    </form>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/kuba-ai/service-manager/src/components/clients/EditClientDialog.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/home/kuba-ai/service-manager/src/components/clients/EditClientDialog.tsx:28:5\n  26 |\n  27 |   useEffect(() => {\n> 28 |     setFormData({\n     |     ^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  29 |       name: client.name,\n  30 |       company: client.company || '',\n  31 |       email: client.email || '',","line":28,"column":5,"nodeType":null,"endLine":28,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":59,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":59,"endColumn":19}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\nimport { useUpdateClient } from '@/lib/hooks/useClients';\nimport { Input } from '@/components/ui/input';\nimport { Button } from '@/components/ui/button';\nimport { DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { useToast } from '@/lib/hooks/useToast';\nimport { Client } from '@/types';\n\ninterface EditClientDialogProps {\n  client: Client;\n  onClose: () => void;\n}\n\nexport default function EditClientDialog({ client, onClose }: EditClientDialogProps) {\n  const updateClient = useUpdateClient();\n  const { toast } = useToast();\n  const [formData, setFormData] = useState({\n    name: '',\n    company: '',\n    email: '',\n    phone: '',\n    address: '',\n    nip: '',\n    notes: '',\n  });\n\n  useEffect(() => {\n    setFormData({\n      name: client.name,\n      company: client.company || '',\n      email: client.email || '',\n      phone: client.phone,\n      address: client.address || '',\n      nip: client.nip || '',\n      notes: client.notes || '',\n    });\n  }, [client]);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!formData.name || !formData.phone) {\n      toast({\n        title: 'Błąd',\n        description: 'Imię i telefon są wymagane',\n        variant: 'destructive',\n      });\n      return;\n    }\n\n    try {\n      await updateClient(client.id, formData);\n      toast({\n        title: 'Sukces',\n        description: 'Klient został zaktualizowany',\n        variant: 'success',\n      });\n      onClose();\n    } catch (error) {\n      toast({\n        title: 'Błąd',\n        description: 'Wystąpił błąd podczas aktualizacji klienta',\n        variant: 'destructive',\n      });\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"space-y-4\">\n      <DialogHeader>\n        <DialogTitle>Edytuj klienta</DialogTitle>\n      </DialogHeader>\n\n      <div className=\"space-y-4\">\n        <div>\n          <label className=\"text-sm font-medium\">Imię i nazwisko *</label>\n          <Input\n            required\n            value={formData.name}\n            onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n          />\n        </div>\n\n        <div>\n          <label className=\"text-sm font-medium\">Firma</label>\n          <Input\n            value={formData.company}\n            onChange={(e) => setFormData({ ...formData, company: e.target.value })}\n          />\n        </div>\n\n        <div>\n          <label className=\"text-sm font-medium\">Telefon *</label>\n          <Input\n            required\n            type=\"tel\"\n            value={formData.phone}\n            onChange={(e) => setFormData({ ...formData, phone: e.target.value })}\n          />\n        </div>\n\n        <div>\n          <label className=\"text-sm font-medium\">Email</label>\n          <Input\n            type=\"email\"\n            value={formData.email}\n            onChange={(e) => setFormData({ ...formData, email: e.target.value })}\n          />\n        </div>\n\n        <div>\n          <label className=\"text-sm font-medium\">Adres</label>\n          <Input\n            value={formData.address}\n            onChange={(e) => setFormData({ ...formData, address: e.target.value })}\n          />\n        </div>\n\n        <div>\n          <label className=\"text-sm font-medium\">NIP</label>\n          <Input\n            value={formData.nip}\n            onChange={(e) => setFormData({ ...formData, nip: e.target.value })}\n          />\n        </div>\n\n        <div>\n          <label className=\"text-sm font-medium\">Notatki</label>\n          <Input\n            value={formData.notes}\n            onChange={(e) => setFormData({ ...formData, notes: e.target.value })}\n          />\n        </div>\n      </div>\n\n      <div className=\"flex justify-end gap-2\">\n        <Button type=\"button\" variant=\"outline\" onClick={onClose}>\n          Anuluj\n        </Button>\n        <Button type=\"submit\">Zapisz zmiany</Button>\n      </div>\n    </form>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/kuba-ai/service-manager/src/components/orders/AddOrderDialog.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":53,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":53,"endColumn":19}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\nimport { useCreateOrder } from '@/lib/hooks/useOrders';\nimport { useClients } from '@/lib/hooks/useClients';\nimport { Input } from '@/components/ui/input';\nimport { Button } from '@/components/ui/button';\nimport { DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { useToast } from '@/lib/hooks/useToast';\nimport { OrderStatus } from '@/types';\n\ninterface AddOrderDialogProps {\n  onClose: () => void;\n}\n\nexport default function AddOrderDialog({ onClose }: AddOrderDialogProps) {\n  const createOrder = useCreateOrder();\n  const { clients } = useClients();\n  const { toast } = useToast();\n  const [formData, setFormData] = useState({\n    clientId: '',\n    title: '',\n    description: '',\n    status: 'nowe' as OrderStatus,\n    value: '',\n    startDate: '',\n    endDate: '',\n    address: '',\n    notes: '',\n  });\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!formData.title || !formData.clientId || !formData.startDate) {\n      toast({\n        title: 'Błąd',\n        description: 'Tytuł, klient i data rozpoczęcia są wymagane',\n        variant: 'destructive',\n      });\n      return;\n    }\n\n    try {\n      await createOrder({\n        ...formData,\n        value: formData.value ? parseFloat(formData.value) : undefined,\n      });\n      toast({\n        title: 'Sukces',\n        description: 'Zlecenie zostało dodane',\n        variant: 'success',\n      });\n      onClose();\n    } catch (error) {\n      toast({\n        title: 'Błąd',\n        description: 'Wystąpił błąd podczas dodawania zlecenia',\n        variant: 'destructive',\n      });\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"space-y-4\">\n      <DialogHeader>\n        <DialogTitle>Nowe zlecenie</DialogTitle>\n      </DialogHeader>\n\n      <div className=\"space-y-4\">\n        <div>\n          <label className=\"text-sm font-medium\">Klient *</label>\n          <select\n            required\n            value={formData.clientId}\n            onChange={(e) => setFormData({ ...formData, clientId: e.target.value })}\n            className=\"w-full h-10 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring\"\n          >\n            <option value=\"\">Wybierz klienta</option>\n            {clients.map((client) => (\n              <option key={client.id} value={client.id}>\n                {client.name} {client.company && `(${client.company})`}\n              </option>\n            ))}\n          </select>\n        </div>\n\n        <div>\n          <label className=\"text-sm font-medium\">Tytuł zlecenia *</label>\n          <Input\n            required\n            value={formData.title}\n            onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n            placeholder=\"Remont łazienki\"\n          />\n        </div>\n\n        <div>\n          <label className=\"text-sm font-medium\">Opis</label>\n          <Input\n            value={formData.description}\n            onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n            placeholder=\"Opis zlecenia\"\n          />\n        </div>\n\n        <div>\n          <label className=\"text-sm font-medium\">Status</label>\n          <select\n            value={formData.status}\n            onChange={(e) => setFormData({ ...formData, status: e.target.value as OrderStatus })}\n            className=\"w-full h-10 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring\"\n          >\n            <option value=\"nowe\">Nowe</option>\n            <option value=\"w trakcie\">W trakcie</option>\n            <option value=\"ukończone\">Ukończone</option>\n            <option value=\"oczekujące\">Oczekujące</option>\n            <option value=\"anulowane\">Anulowane</option>\n          </select>\n        </div>\n\n        <div>\n          <label className=\"text-sm font-medium\">Wartość (PLN)</label>\n          <Input\n            type=\"number\"\n            step=\"0.01\"\n            value={formData.value}\n            onChange={(e) => setFormData({ ...formData, value: e.target.value })}\n            placeholder=\"5000\"\n          />\n        </div>\n\n        <div>\n          <label className=\"text-sm font-medium\">Data rozpoczęcia *</label>\n          <Input\n            required\n            type=\"date\"\n            value={formData.startDate}\n            onChange={(e) => setFormData({ ...formData, startDate: e.target.value })}\n          />\n        </div>\n\n        <div>\n          <label className=\"text-sm font-medium\">Data zakończenia</label>\n          <Input\n            type=\"date\"\n            value={formData.endDate}\n            onChange={(e) => setFormData({ ...formData, endDate: e.target.value })}\n          />\n        </div>\n\n        <div>\n          <label className=\"text-sm font-medium\">Adres realizacji</label>\n          <Input\n            value={formData.address}\n            onChange={(e) => setFormData({ ...formData, address: e.target.value })}\n            placeholder=\"Warszawa, ul. Długa 1\"\n          />\n        </div>\n\n        <div>\n          <label className=\"text-sm font-medium\">Notatki</label>\n          <Input\n            value={formData.notes}\n            onChange={(e) => setFormData({ ...formData, notes: e.target.value })}\n            placeholder=\"Dodatkowe informacje...\"\n          />\n        </div>\n      </div>\n\n      <div className=\"flex justify-end gap-2\">\n        <Button type=\"button\" variant=\"outline\" onClick={onClose}>\n          Anuluj\n        </Button>\n        <Button type=\"submit\">Dodaj zlecenie</Button>\n      </div>\n    </form>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/kuba-ai/service-manager/src/components/orders/EditOrderDialog.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/home/kuba-ai/service-manager/src/components/orders/EditOrderDialog.tsx:34:5\n  32 |\n  33 |   useEffect(() => {\n> 34 |     setFormData({\n     |     ^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  35 |       clientId: order.clientId,\n  36 |       title: order.title,\n  37 |       description: order.description || '',","line":34,"column":5,"nodeType":null,"endLine":34,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":70,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":70,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":88,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":88,"endColumn":19}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\nimport { useUpdateOrder } from '@/lib/hooks/useOrders';\nimport { useUpdateOrderStatus } from '@/lib/hooks/useOrders';\nimport { useClients } from '@/lib/hooks/useClients';\nimport { Input } from '@/components/ui/input';\nimport { Button } from '@/components/ui/button';\nimport { DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { useToast } from '@/lib/hooks/useToast';\nimport { Order, OrderStatus } from '@/types';\n\ninterface EditOrderDialogProps {\n  order: Order;\n  onClose: () => void;\n}\n\nexport default function EditOrderDialog({ order, onClose }: EditOrderDialogProps) {\n  const updateOrder = useUpdateOrder();\n  const updateOrderStatus = useUpdateOrderStatus();\n  const { clients } = useClients();\n  const { toast } = useToast();\n  const [formData, setFormData] = useState({\n    clientId: '',\n    title: '',\n    description: '',\n    status: 'nowe' as OrderStatus,\n    value: '',\n    startDate: '',\n    endDate: '',\n    address: '',\n    notes: '',\n  });\n\n  useEffect(() => {\n    setFormData({\n      clientId: order.clientId,\n      title: order.title,\n      description: order.description || '',\n      status: order.status,\n      value: order.value ? order.value.toString() : '',\n      startDate: order.startDate.split('T')[0],\n      endDate: order.endDate ? order.endDate.split('T')[0] : '',\n      address: order.address || '',\n      notes: order.notes || '',\n    });\n  }, [order]);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!formData.title || !formData.clientId || !formData.startDate) {\n      toast({\n        title: 'Błąd',\n        description: 'Tytuł, klient i data rozpoczęcia są wymagane',\n        variant: 'destructive',\n      });\n      return;\n    }\n\n    try {\n      await updateOrder(order.id, {\n        ...formData,\n        value: formData.value ? parseFloat(formData.value) : undefined,\n      });\n      toast({\n        title: 'Sukces',\n        description: 'Zlecenie zostało zaktualizowane',\n        variant: 'success',\n      });\n      onClose();\n    } catch (error) {\n      toast({\n        title: 'Błąd',\n        description: 'Wystąpił błąd podczas aktualizacji zlecenia',\n        variant: 'destructive',\n      });\n    }\n  };\n\n  const handleStatusChange = async (status: OrderStatus) => {\n    try {\n      await updateOrderStatus(order.id, status);\n      toast({\n        title: 'Sukces',\n        description: 'Status został zaktualizowany',\n        variant: 'success',\n      });\n      onClose();\n    } catch (error) {\n      toast({\n        title: 'Błąd',\n        description: 'Wystąpił błąd podczas aktualizacji statusu',\n        variant: 'destructive',\n      });\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"space-y-4\">\n      <DialogHeader>\n        <DialogTitle>Edytuj zlecenie</DialogTitle>\n      </DialogHeader>\n\n      <div className=\"space-y-4\">\n        <div>\n          <label className=\"text-sm font-medium\">Klient *</label>\n          <select\n            required\n            value={formData.clientId}\n            onChange={(e) => setFormData({ ...formData, clientId: e.target.value })}\n            className=\"w-full h-10 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring\"\n          >\n            <option value=\"\">Wybierz klienta</option>\n            {clients.map((client) => (\n              <option key={client.id} value={client.id}>\n                {client.name} {client.company && `(${client.company})`}\n              </option>\n            ))}\n          </select>\n        </div>\n\n        <div>\n          <label className=\"text-sm font-medium\">Tytuł zlecenia *</label>\n          <Input\n            required\n            value={formData.title}\n            onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n          />\n        </div>\n\n        <div>\n          <label className=\"text-sm font-medium\">Opis</label>\n          <Input\n            value={formData.description}\n            onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n          />\n        </div>\n\n        <div>\n          <label className=\"text-sm font-medium\">Status</label>\n          <select\n            value={formData.status}\n            onChange={(e) => {\n              const newStatus = e.target.value as OrderStatus;\n              setFormData({ ...formData, status: newStatus });\n              handleStatusChange(newStatus);\n            }}\n            className=\"w-full h-10 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring\"\n          >\n            <option value=\"nowe\">Nowe</option>\n            <option value=\"w trakcie\">W trakcie</option>\n            <option value=\"ukończone\">Ukończone</option>\n            <option value=\"oczekujące\">Oczekujące</option>\n            <option value=\"anulowane\">Anulowane</option>\n          </select>\n        </div>\n\n        <div>\n          <label className=\"text-sm font-medium\">Wartość (PLN)</label>\n          <Input\n            type=\"number\"\n            step=\"0.01\"\n            value={formData.value}\n            onChange={(e) => setFormData({ ...formData, value: e.target.value })}\n          />\n        </div>\n\n        <div>\n          <label className=\"text-sm font-medium\">Data rozpoczęcia *</label>\n          <Input\n            required\n            type=\"date\"\n            value={formData.startDate}\n            onChange={(e) => setFormData({ ...formData, startDate: e.target.value })}\n          />\n        </div>\n\n        <div>\n          <label className=\"text-sm font-medium\">Data zakończenia</label>\n          <Input\n            type=\"date\"\n            value={formData.endDate}\n            onChange={(e) => setFormData({ ...formData, endDate: e.target.value })}\n          />\n        </div>\n\n        <div>\n          <label className=\"text-sm font-medium\">Adres realizacji</label>\n          <Input\n            value={formData.address}\n            onChange={(e) => setFormData({ ...formData, address: e.target.value })}\n          />\n        </div>\n\n        <div>\n          <label className=\"text-sm font-medium\">Notatki</label>\n          <Input\n            value={formData.notes}\n            onChange={(e) => setFormData({ ...formData, notes: e.target.value })}\n          />\n        </div>\n      </div>\n\n      <div className=\"flex justify-end gap-2\">\n        <Button type=\"button\" variant=\"outline\" onClick={onClose}>\n          Anuluj\n        </Button>\n        <Button type=\"submit\">Zapisz zmiany</Button>\n      </div>\n    </form>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/kuba-ai/service-manager/src/components/orders/OrderChecklist.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/kuba-ai/service-manager/src/components/orders/OrderGallery.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":65,"column":113,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":65,"endColumn":116,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2348,2351],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2348,2351],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport { Camera, Plus, X, Image as ImageIcon, Loader2 } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { compressImage } from '@/lib/utils/imageUtils';\nimport { useToast } from '@/lib/hooks/useToast';\nimport { motion, AnimatePresence } from 'framer-motion';\n\ninterface OrderGalleryProps {\n    images?: {\n        before: string[];\n        after: string[];\n    };\n    onImagesChange: (images: { before: string[]; after: string[] }) => void;\n}\n\nexport default function OrderGallery({ images = { before: [], after: [] }, onImagesChange }: OrderGalleryProps) {\n    const [isUploading, setIsUploading] = useState<{ [key: string]: boolean }>({});\n    const { toast } = useToast();\n\n    const handleUpload = async (category: 'before' | 'after', files: FileList | null) => {\n        if (!files) return;\n\n        const key = category;\n        setIsUploading((prev) => ({ ...prev, [key]: true }));\n\n        try {\n            const newImages: string[] = [];\n            for (let i = 0; i < files.length; i++) {\n                const compressed = await compressImage(files[i]);\n                newImages.push(compressed);\n            }\n\n            onImagesChange({\n                ...images,\n                [category]: [...(images[category] || []), ...newImages],\n            });\n\n            toast({\n                title: 'Sukces',\n                description: `Dodano ${newImages.length} zdjęć`,\n                variant: 'success',\n            });\n        } catch (error) {\n            console.error('Error uploading images:', error);\n            toast({\n                title: 'Błąd',\n                description: 'Nie udało się dodać zdjęć',\n                variant: 'destructive',\n            });\n        } finally {\n            setIsUploading((prev) => ({ ...prev, [key]: false }));\n        }\n    };\n\n    const removeImage = (category: 'before' | 'after', index: number) => {\n        const newCategoryImages = [...images[category]];\n        newCategoryImages.splice(index, 1);\n        onImagesChange({\n            ...images,\n            [category]: newCategoryImages,\n        });\n    };\n\n    const ImageSection = ({ title, category, icon: Icon }: { title: string; category: 'before' | 'after'; icon: any }) => (\n        <Card className=\"border-white/5 bg-white/5\">\n            <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\n                <div className=\"flex items-center space-x-2\">\n                    <div className=\"p-1.5 rounded-lg bg-primary/10\">\n                        <Icon className=\"h-4 w-4 text-primary\" />\n                    </div>\n                    <CardTitle className=\"text-md font-semibold\">{title}</CardTitle>\n                </div>\n                <div className=\"flex items-center space-x-2\">\n                    <input\n                        type=\"file\"\n                        id={`upload-${category}`}\n                        className=\"hidden\"\n                        accept=\"image/*\"\n                        multiple\n                        onChange={(e) => handleUpload(category, e.target.files)}\n                        disabled={isUploading[category]}\n                    />\n                    <Button\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        asChild\n                        disabled={isUploading[category]}\n                        className=\"h-8 px-2 text-xs hover:bg-white/10\"\n                    >\n                        <label htmlFor={`upload-${category}`} className=\"cursor-pointer flex items-center\">\n                            {isUploading[category] ? (\n                                <Loader2 className=\"h-4 w-4 mr-1 animate-spin\" />\n                            ) : (\n                                <Plus className=\"h-4 w-4 mr-1\" />\n                            )}\n                            Dodaj\n                        </label>\n                    </Button>\n                </div>\n            </CardHeader>\n            <CardContent>\n                {(!images[category] || images[category].length === 0) ? (\n                    <div className=\"flex flex-col items-center justify-center py-8 rounded-xl border border-dashed border-white/10 bg-white/[0.02]\">\n                        <ImageIcon className=\"h-8 w-8 text-muted-foreground/30 mb-2\" />\n                        <p className=\"text-xs text-muted-foreground\">Brak zdjęć w tej sekcji</p>\n                    </div>\n                ) : (\n                    <div className=\"grid grid-cols-2 md:grid-cols-3 gap-3\">\n                        <AnimatePresence>\n                            {images[category].map((img, idx) => (\n                                <motion.div\n                                    key={`${category}-${idx}`}\n                                    layout\n                                    initial={{ opacity: 0, scale: 0.9 }}\n                                    animate={{ opacity: 1, scale: 1 }}\n                                    exit={{ opacity: 0, scale: 0.9 }}\n                                    className=\"group relative aspect-square rounded-xl overflow-hidden border border-white/5\"\n                                >\n                                    <img src={img} alt={`${title} ${idx}`} className=\"w-full h-full object-cover\" />\n                                    <div className=\"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center\">\n                                        <Button\n                                            variant=\"destructive\"\n                                            size=\"icon\"\n                                            className=\"h-8 w-8 rounded-full shadow-lg\"\n                                            onClick={() => removeImage(category, idx)}\n                                        >\n                                            <X className=\"h-4 w-4\" />\n                                        </Button>\n                                    </div>\n                                </motion.div>\n                            ))}\n                        </AnimatePresence>\n                    </div>\n                )}\n            </CardContent>\n        </Card>\n    );\n\n    return (\n        <div className=\"space-y-6\">\n            <ImageSection title=\"Przed realizacją\" category=\"before\" icon={Camera} />\n            <ImageSection title=\"Efekt końcowy\" category=\"after\" icon={ImageIcon} />\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/kuba-ai/service-manager/src/components/orders/StatusBadge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/kuba-ai/service-manager/src/components/quotes/AddQuoteDialog.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Calendar' is defined but never used.","line":10,"column":24,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":32},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/home/kuba-ai/service-manager/src/components/quotes/AddQuoteDialog.tsx:36:9\n  34 |       const order = orders.find(o => o.id === orderId);\n  35 |       if (order) {\n> 36 |         setFormData(prev => ({\n     |         ^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  37 |           ...prev,\n  38 |           orderId: order.id,\n  39 |           clientId: order.clientId,","line":36,"column":9,"nodeType":null,"endLine":36,"endColumn":20}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\nimport { useCreateQuote } from '@/lib/hooks/useQuotes';\nimport { useClients } from '@/lib/hooks/useClients';\nimport { useOrders } from '@/lib/hooks/useOrders';\nimport { Input } from '@/components/ui/input';\nimport { Button } from '@/components/ui/button';\nimport { DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { useToast } from '@/lib/hooks/useToast';\nimport { QuoteItem, QuoteStatus } from '@/types';\nimport { Plus, Trash2, Calendar } from 'lucide-react';\nimport { addDays } from '@/lib/utils/formatters';\n\ninterface AddQuoteDialogProps {\n  orderId?: string | null;\n  onClose: () => void;\n}\n\nexport default function AddQuoteDialog({ orderId, onClose }: AddQuoteDialogProps) {\n  const createQuote = useCreateQuote();\n  const { clients } = useClients();\n  const { orders } = useOrders();\n  const { toast } = useToast();\n  const [formData, setFormData] = useState({\n    clientId: '',\n    orderId: '',\n    status: 'projekt' as QuoteStatus,\n    validUntil: addDays(new Date(), 30).toISOString().split('T')[0],\n    notes: '',\n  });\n  const [items, setItems] = useState<QuoteItem[]>([]);\n\n  useEffect(() => {\n    if (orderId) {\n      const order = orders.find(o => o.id === orderId);\n      if (order) {\n        setFormData(prev => ({\n          ...prev,\n          orderId: order.id,\n          clientId: order.clientId,\n        }));\n      }\n    }\n  }, [orderId, orders]);\n\n  const addItem = () => {\n    const newItem: QuoteItem = {\n      id: crypto.randomUUID(),\n      name: '',\n      description: '',\n      quantity: 1,\n      unit: 'szt',\n      unitPrice: 0,\n      vatRate: 23,\n      total: 0,\n    };\n    setItems([...items, newItem]);\n  };\n\n  const updateItem = (id: string, updates: Partial<QuoteItem>) => {\n    setItems(items.map(item => {\n      if (item.id === id) {\n        const updated = { ...item, ...updates };\n        updated.total = updated.quantity * updated.unitPrice * (1 + updated.vatRate / 100);\n        return updated;\n      }\n      return item;\n    }));\n  };\n\n  const removeItem = (id: string) => {\n    setItems(items.filter(item => item.id !== id));\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!formData.clientId || items.length === 0 || items.some(item => !item.name)) {\n      toast({\n        title: 'Błąd',\n        description: 'Klient i co najmniej jedna pozycja są wymagane',\n        variant: 'destructive',\n      });\n      return;\n    }\n\n    try {\n      await createQuote({\n        ...formData,\n        items,\n        validUntil: formData.validUntil ? new Date(formData.validUntil).toISOString() : undefined,\n      });\n      toast({\n        title: 'Sukces',\n        description: 'Kosztorys został utworzony',\n        variant: 'success',\n      });\n      onClose();\n    } catch {\n      toast({\n        title: 'Błąd',\n        description: 'Wystąpił błąd podczas tworzenia kosztorysu',\n        variant: 'destructive',\n      });\n    }\n  };\n\n  const subtotal = items.reduce((sum, item) => sum + (item.quantity * item.unitPrice), 0);\n  const vatTotal = items.reduce((sum, item) => sum + (item.quantity * item.unitPrice * item.vatRate / 100), 0);\n  const total = subtotal + vatTotal;\n\n  return (\n    <form onSubmit={handleSubmit} className=\"space-y-4\">\n      <DialogHeader>\n        <DialogTitle>Nowy kosztorys</DialogTitle>\n      </DialogHeader>\n\n      <div className=\"space-y-4\">\n        <div>\n          <label className=\"text-sm font-medium\">Klient *</label>\n          <select\n            required\n            value={formData.clientId}\n            onChange={(e) => setFormData({ ...formData, clientId: e.target.value })}\n            className=\"w-full h-10 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring\"\n          >\n            <option value=\"\">Wybierz klienta</option>\n            {clients.map((client) => (\n              <option key={client.id} value={client.id}>\n                {client.name} {client.company && `(${client.company})`}\n              </option>\n            ))}\n          </select>\n        </div>\n\n        {formData.clientId && (\n          <div>\n            <label className=\"text-sm font-medium\">Zlecenie (opcjonalne)</label>\n            <select\n              value={formData.orderId}\n              onChange={(e) => setFormData({ ...formData, orderId: e.target.value })}\n              className=\"w-full h-10 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring\"\n            >\n              <option value=\"\">Brak zlecenia</option>\n              {orders.filter(o => o.clientId === formData.clientId).map((order) => (\n                <option key={order.id} value={order.id}>\n                  {order.orderNumber} - {order.title}\n                </option>\n              ))}\n            </select>\n          </div>\n        )}\n\n        <div className=\"grid grid-cols-2 gap-4\">\n          <div>\n            <label className=\"text-sm font-medium\">Status</label>\n            <select\n              value={formData.status}\n              onChange={(e) => setFormData({ ...formData, status: e.target.value as QuoteStatus })}\n              className=\"w-full h-10 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring\"\n            >\n              <option value=\"projekt\">Projekt</option>\n              <option value=\"wyslane\">Wysłane</option>\n              <option value=\"zaakceptowane\">Zaakceptowane</option>\n              <option value=\"odrzucone\">Odrzucone</option>\n            </select>\n          </div>\n          <div>\n            <label className=\"text-sm font-medium\">Waźny do</label>\n            <Input\n              type=\"date\"\n              value={formData.validUntil}\n              onChange={(e) => setFormData({ ...formData, validUntil: e.target.value })}\n            />\n          </div>\n        </div>\n\n        <div>\n          <div className=\"flex items-center justify-between mb-2\">\n            <label className=\"text-sm font-medium\">Pozycje</label>\n            <Button type=\"button\" variant=\"outline\" size=\"sm\" onClick={addItem}>\n              <Plus className=\"h-4 w-4 mr-1\" />\n              Dodaj pozycję\n            </Button>\n          </div>\n\n          {items.length === 0 ? (\n            <p className=\"text-sm text-muted-foreground text-center py-4\">\n              Brak pozycji. Dodaj co najmniej jedną.\n            </p>\n          ) : (\n            <div className=\"space-y-3\">\n              {items.map((item) => (\n                <div key={item.id} className=\"border rounded-lg p-4 space-y-3\">\n                  <div className=\"flex justify-between items-start\">\n                    <Input\n                      placeholder=\"Nazwa pozycji\"\n                      value={item.name}\n                      onChange={(e) => updateItem(item.id, { name: e.target.value })}\n                      className=\"flex-1\"\n                    />\n                    <Button\n                      type=\"button\"\n                      variant=\"ghost\"\n                      size=\"icon\"\n                      onClick={() => removeItem(item.id)}\n                      className=\"text-destructive\"\n                    >\n                      <Trash2 className=\"h-4 w-4\" />\n                    </Button>\n                  </div>\n\n                  <Input\n                    placeholder=\"Opis (opcjonalne)\"\n                    value={item.description || ''}\n                    onChange={(e) => updateItem(item.id, { description: e.target.value })}\n                  />\n\n                  <div className=\"grid grid-cols-4 gap-2\">\n                    <div>\n                      <label className=\"text-xs text-muted-foreground\">Ilość</label>\n                      <Input\n                        type=\"number\"\n                        step=\"0.01\"\n                        value={item.quantity}\n                        onChange={(e) => updateItem(item.id, { quantity: parseFloat(e.target.value) || 0 })}\n                      />\n                    </div>\n                    <div>\n                      <label className=\"text-xs text-muted-foreground\">Jednostka</label>\n                      <select\n                        value={item.unit}\n                        onChange={(e) => updateItem(item.id, { unit: e.target.value })}\n                        className=\"w-full h-10 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring\"\n                      >\n                        <option value=\"szt\">szt</option>\n                        <option value=\"m\">m</option>\n                        <option value=\"m²\">m²</option>\n                        <option value=\"m³\">m³</option>\n                        <option value=\"kg\">kg</option>\n                        <option value=\"godz\">godz</option>\n                        <option value=\"kpl\">kpl</option>\n                      </select>\n                    </div>\n                    <div>\n                      <label className=\"text-xs text-muted-foreground\">Cena jedn.</label>\n                      <Input\n                        type=\"number\"\n                        step=\"0.01\"\n                        value={item.unitPrice}\n                        onChange={(e) => updateItem(item.id, { unitPrice: parseFloat(e.target.value) || 0 })}\n                      />\n                    </div>\n                    <div>\n                      <label className=\"text-xs text-muted-foreground\">VAT %</label>\n                      <select\n                        value={item.vatRate}\n                        onChange={(e) => updateItem(item.id, { vatRate: parseFloat(e.target.value) })}\n                        className=\"w-full h-10 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring\"\n                      >\n                        <option value=\"0\">0%</option>\n                        <option value=\"8\">8%</option>\n                        <option value=\"23\">23%</option>\n                      </select>\n                    </div>\n                  </div>\n\n                  <div className=\"text-right text-sm font-medium\">\n                    Suma: {(item.quantity * item.unitPrice * (1 + item.vatRate / 100)).toFixed(2)} PLN\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n\n        {items.length > 0 && (\n          <div className=\"border rounded-lg p-4 space-y-2 bg-muted/50\">\n            <div className=\"flex justify-between text-sm\">\n              <span>Netto:</span>\n              <span>{subtotal.toFixed(2)} PLN</span>\n            </div>\n            <div className=\"flex justify-between text-sm\">\n              <span>VAT:</span>\n              <span>{vatTotal.toFixed(2)} PLN</span>\n            </div>\n            <div className=\"flex justify-between text-lg font-bold\">\n              <span>Brutto:</span>\n              <span className=\"text-primary\">{total.toFixed(2)} PLN</span>\n            </div>\n          </div>\n        )}\n\n        <div>\n          <label className=\"text-sm font-medium\">Notatki</label>\n          <Input\n            value={formData.notes}\n            onChange={(e) => setFormData({ ...formData, notes: e.target.value })}\n            placeholder=\"Dodatkowe informacje...\"\n          />\n        </div>\n      </div>\n\n      <div className=\"flex justify-end gap-2\">\n        <Button type=\"button\" variant=\"outline\" onClick={onClose}>\n          Anuluj\n        </Button>\n        <Button type=\"submit\">Utwórz kosztorys</Button>\n      </div>\n    </form>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/kuba-ai/service-manager/src/components/quotes/EditQuoteDialog.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/home/kuba-ai/service-manager/src/components/quotes/EditQuoteDialog.tsx:34:5\n  32 |\n  33 |   useEffect(() => {\n> 34 |     setFormData({\n     |     ^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  35 |       clientId: quote.clientId,\n  36 |       orderId: quote.orderId || '',\n  37 |       status: quote.status,","line":34,"column":5,"nodeType":null,"endLine":34,"endColumn":16}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\nimport { useUpdateQuote } from '@/lib/hooks/useQuotes';\nimport { useUpdateQuoteStatus } from '@/lib/hooks/useQuotes';\nimport { useClients } from '@/lib/hooks/useClients';\nimport { useOrders } from '@/lib/hooks/useOrders';\nimport { Input } from '@/components/ui/input';\nimport { Button } from '@/components/ui/button';\nimport { DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { useToast } from '@/lib/hooks/useToast';\nimport { Quote, QuoteItem, QuoteStatus } from '@/types';\nimport { Plus, Trash2 } from 'lucide-react';\n\ninterface EditQuoteDialogProps {\n  quote: Quote;\n  onClose: () => void;\n}\n\nexport default function EditQuoteDialog({ quote, onClose }: EditQuoteDialogProps) {\n  const updateQuote = useUpdateQuote();\n  const updateQuoteStatus = useUpdateQuoteStatus();\n  const { clients } = useClients();\n  const { orders } = useOrders();\n  const { toast } = useToast();\n  const [formData, setFormData] = useState({\n    clientId: '',\n    orderId: '',\n    status: 'projekt' as QuoteStatus,\n    validUntil: '',\n    notes: '',\n  });\n  const [items, setItems] = useState<QuoteItem[]>([]);\n\n  useEffect(() => {\n    setFormData({\n      clientId: quote.clientId,\n      orderId: quote.orderId || '',\n      status: quote.status,\n      validUntil: quote.validUntil ? quote.validUntil.split('T')[0] : '',\n      notes: quote.notes || '',\n    });\n    setItems(quote.items);\n  }, [quote]);\n\n  const addItem = () => {\n    const newItem: QuoteItem = {\n      id: crypto.randomUUID(),\n      name: '',\n      description: '',\n      quantity: 1,\n      unit: 'szt',\n      unitPrice: 0,\n      vatRate: 23,\n      total: 0,\n    };\n    setItems([...items, newItem]);\n  };\n\n  const updateItem = (id: string, updates: Partial<QuoteItem>) => {\n    setItems(items.map(item => {\n      if (item.id === id) {\n        const updated = { ...item, ...updates };\n        updated.total = updated.quantity * updated.unitPrice * (1 + updated.vatRate / 100);\n        return updated;\n      }\n      return item;\n    }));\n  };\n\n  const removeItem = (id: string) => {\n    setItems(items.filter(item => item.id !== id));\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!formData.clientId || items.length === 0 || items.some(item => !item.name)) {\n      toast({\n        title: 'Błąd',\n        description: 'Klient i co najmniej jedna pozycja są wymagane',\n        variant: 'destructive',\n      });\n      return;\n    }\n\n    try {\n      await updateQuote(quote.id, {\n        ...formData,\n        items,\n        validUntil: formData.validUntil ? new Date(formData.validUntil).toISOString() : undefined,\n      });\n      toast({\n        title: 'Sukces',\n        description: 'Kosztorys został zaktualizowany',\n        variant: 'success',\n      });\n      onClose();\n    } catch {\n      toast({\n        title: 'Błąd',\n        description: 'Wystąpił błąd podczas aktualizacji kosztorysu',\n        variant: 'destructive',\n      });\n    }\n  };\n\n  const handleStatusChange = async (status: QuoteStatus) => {\n    try {\n      await updateQuoteStatus(quote.id, status);\n      toast({\n        title: 'Sukces',\n        description: 'Status został zaktualizowany',\n        variant: 'success',\n      });\n      onClose();\n    } catch {\n      toast({\n        title: 'Błąd',\n        description: 'Wystąpił błąd podczas aktualizacji statusu',\n        variant: 'destructive',\n      });\n    }\n  };\n\n  const subtotal = items.reduce((sum, item) => sum + (item.quantity * item.unitPrice), 0);\n  const vatTotal = items.reduce((sum, item) => sum + (item.quantity * item.unitPrice * item.vatRate / 100), 0);\n  const total = subtotal + vatTotal;\n\n  return (\n    <form onSubmit={handleSubmit} className=\"space-y-4\">\n      <DialogHeader>\n        <DialogTitle>Edytuj kosztorys</DialogTitle>\n      </DialogHeader>\n\n      <div className=\"space-y-4\">\n        <div>\n          <label className=\"text-sm font-medium\">Klient *</label>\n          <select\n            required\n            value={formData.clientId}\n            onChange={(e) => setFormData({ ...formData, clientId: e.target.value })}\n            className=\"w-full h-10 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring\"\n          >\n            <option value=\"\">Wybierz klienta</option>\n            {clients.map((client) => (\n              <option key={client.id} value={client.id}>\n                {client.name} {client.company && `(${client.company})`}\n              </option>\n            ))}\n          </select>\n        </div>\n\n        {formData.clientId && (\n          <div>\n            <label className=\"text-sm font-medium\">Zlecenie (opcjonalne)</label>\n            <select\n              value={formData.orderId}\n              onChange={(e) => setFormData({ ...formData, orderId: e.target.value })}\n              className=\"w-full h-10 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring\"\n            >\n              <option value=\"\">Brak zlecenia</option>\n              {orders.filter(o => o.clientId === formData.clientId).map((order) => (\n                <option key={order.id} value={order.id}>\n                  {order.orderNumber} - {order.title}\n                </option>\n              ))}\n            </select>\n          </div>\n        )}\n\n        <div className=\"grid grid-cols-2 gap-4\">\n          <div>\n            <label className=\"text-sm font-medium\">Status</label>\n            <select\n              value={formData.status}\n              onChange={(e) => {\n                const newStatus = e.target.value as QuoteStatus;\n                setFormData({ ...formData, status: newStatus });\n                handleStatusChange(newStatus);\n              }}\n              className=\"w-full h-10 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring\"\n            >\n              <option value=\"projekt\">Projekt</option>\n              <option value=\"wyslane\">Wysłane</option>\n              <option value=\"zaakceptowane\">Zaakceptowane</option>\n              <option value=\"odrzucone\">Odrzucone</option>\n            </select>\n          </div>\n          <div>\n            <label className=\"text-sm font-medium\">Waźny do</label>\n            <Input\n              type=\"date\"\n              value={formData.validUntil}\n              onChange={(e) => setFormData({ ...formData, validUntil: e.target.value })}\n            />\n          </div>\n        </div>\n\n        <div>\n          <div className=\"flex items-center justify-between mb-2\">\n            <label className=\"text-sm font-medium\">Pozycje</label>\n            <Button type=\"button\" variant=\"outline\" size=\"sm\" onClick={addItem}>\n              <Plus className=\"h-4 w-4 mr-1\" />\n              Dodaj pozycję\n            </Button>\n          </div>\n\n          {items.length === 0 ? (\n            <p className=\"text-sm text-muted-foreground text-center py-4\">\n              Brak pozycji. Dodaj co najmniej jedną.\n            </p>\n          ) : (\n            <div className=\"space-y-3\">\n              {items.map((item) => (\n                <div key={item.id} className=\"border rounded-lg p-4 space-y-3\">\n                  <div className=\"flex justify-between items-start\">\n                    <Input\n                      value={item.name}\n                      onChange={(e) => updateItem(item.id, { name: e.target.value })}\n                      className=\"flex-1\"\n                    />\n                    <Button\n                      type=\"button\"\n                      variant=\"ghost\"\n                      size=\"icon\"\n                      onClick={() => removeItem(item.id)}\n                      className=\"text-destructive\"\n                    >\n                      <Trash2 className=\"h-4 w-4\" />\n                    </Button>\n                  </div>\n\n                  <Input\n                    value={item.description || ''}\n                    onChange={(e) => updateItem(item.id, { description: e.target.value })}\n                  />\n\n                  <div className=\"grid grid-cols-4 gap-2\">\n                    <div>\n                      <label className=\"text-xs text-muted-foreground\">Ilość</label>\n                      <Input\n                        type=\"number\"\n                        step=\"0.01\"\n                        value={item.quantity}\n                        onChange={(e) => updateItem(item.id, { quantity: parseFloat(e.target.value) || 0 })}\n                      />\n                    </div>\n                    <div>\n                      <label className=\"text-xs text-muted-foreground\">Jednostka</label>\n                      <select\n                        value={item.unit}\n                        onChange={(e) => updateItem(item.id, { unit: e.target.value })}\n                        className=\"w-full h-10 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring\"\n                      >\n                        <option value=\"szt\">szt</option>\n                        <option value=\"m\">m</option>\n                        <option value=\"m²\">m²</option>\n                        <option value=\"m³\">m³</option>\n                        <option value=\"kg\">kg</option>\n                        <option value=\"godz\">godz</option>\n                        <option value=\"kpl\">kpl</option>\n                      </select>\n                    </div>\n                    <div>\n                      <label className=\"text-xs text-muted-foreground\">Cena jedn.</label>\n                      <Input\n                        type=\"number\"\n                        step=\"0.01\"\n                        value={item.unitPrice}\n                        onChange={(e) => updateItem(item.id, { unitPrice: parseFloat(e.target.value) || 0 })}\n                      />\n                    </div>\n                    <div>\n                      <label className=\"text-xs text-muted-foreground\">VAT %</label>\n                      <select\n                        value={item.vatRate}\n                        onChange={(e) => updateItem(item.id, { vatRate: parseFloat(e.target.value) })}\n                        className=\"w-full h-10 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring\"\n                      >\n                        <option value=\"0\">0%</option>\n                        <option value=\"8\">8%</option>\n                        <option value=\"23\">23%</option>\n                      </select>\n                    </div>\n                  </div>\n\n                  <div className=\"text-right text-sm font-medium\">\n                    Suma: {(item.quantity * item.unitPrice * (1 + item.vatRate / 100)).toFixed(2)} PLN\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n\n        {items.length > 0 && (\n          <div className=\"border rounded-lg p-4 space-y-2 bg-muted/50\">\n            <div className=\"flex justify-between text-sm\">\n              <span>Netto:</span>\n              <span>{subtotal.toFixed(2)} PLN</span>\n            </div>\n            <div className=\"flex justify-between text-sm\">\n              <span>VAT:</span>\n              <span>{vatTotal.toFixed(2)} PLN</span>\n            </div>\n            <div className=\"flex justify-between text-lg font-bold\">\n              <span>Brutto:</span>\n              <span className=\"text-primary\">{total.toFixed(2)} PLN</span>\n            </div>\n          </div>\n        )}\n\n        <div>\n          <label className=\"text-sm font-medium\">Notatki</label>\n          <Input\n            value={formData.notes}\n            onChange={(e) => setFormData({ ...formData, notes: e.target.value })}\n          />\n        </div>\n      </div>\n\n      <div className=\"flex justify-end gap-2\">\n        <Button type=\"button\" variant=\"outline\" onClick={onClose}>\n          Anuluj\n        </Button>\n        <Button type=\"submit\">Zapisz zmiany</Button>\n      </div>\n    </form>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/kuba-ai/service-manager/src/components/quotes/QuoteStatusBadge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/kuba-ai/service-manager/src/components/ui/badge.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":42,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":42,"endColumn":30}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils/cn\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n        success:\n          \"border-transparent bg-green-500 text-white hover:bg-green-600\",\n        warning:\n          \"border-transparent bg-yellow-500 text-white hover:bg-yellow-600\",\n        info:\n          \"border-transparent bg-blue-500 text-white hover:bg-blue-600\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n","usedDeprecatedRules":[]},{"filePath":"/home/kuba-ai/service-manager/src/components/ui/button.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":56,"column":18,"nodeType":"Identifier","messageId":"namedExport","endLine":56,"endColumn":32}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils/cn\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","usedDeprecatedRules":[]},{"filePath":"/home/kuba-ai/service-manager/src/components/ui/card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/kuba-ai/service-manager/src/components/ui/checkbox.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/kuba-ai/service-manager/src/components/ui/dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/kuba-ai/service-manager/src/components/ui/input.tsx","messages":[{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"An interface declaring no members is equivalent to its supertype.","line":5,"column":18,"nodeType":"Identifier","messageId":"noEmptyInterfaceWithSuper","endLine":5,"endColumn":28,"suggestions":[{"messageId":"replaceEmptyInterfaceWithSuper","fix":{"range":[76,153],"text":"type InputProps = React.InputHTMLAttributes<HTMLInputElement>"},"desc":"Replace empty interface with a type alias."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils/cn\"\n\nexport interface InputProps\n  extends React.InputHTMLAttributes<HTMLInputElement> {}\n\nconst Input = React.forwardRef<HTMLInputElement, InputProps>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","usedDeprecatedRules":[]},{"filePath":"/home/kuba-ai/service-manager/src/components/ui/progress.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/kuba-ai/service-manager/src/components/ui/tabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/kuba-ai/service-manager/src/components/ui/toast.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/kuba-ai/service-manager/src/components/ui/toaster.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/kuba-ai/service-manager/src/layouts/BottomNavigation.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'BarChart3' is defined but never used.","line":3,"column":48,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":57},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Settings' is defined but never used.","line":3,"column":59,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":67}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useNavigate } from 'react-router-dom';\nimport { useUIStore } from '@/lib/stores/uiStore';\nimport { Home, Users, ClipboardList, FileText, BarChart3, Settings, Calendar } from 'lucide-react';\nimport { cn } from '@/lib/utils/cn';\nimport { motion } from 'framer-motion';\n\nconst navItems = [\n  { id: 'dashboard' as const, label: 'Pulpit', icon: Home },\n  { id: 'calendar' as const, label: 'Kalendarz', icon: Calendar },\n  { id: 'clients' as const, label: 'Klienci', icon: Users },\n  { id: 'orders' as const, label: 'Zlecenia', icon: ClipboardList },\n  { id: 'quotes' as const, label: 'Kosztorysy', icon: FileText },\n];\n\nexport default function BottomNavigation() {\n  const navigate = useNavigate();\n  const { currentPage } = useUIStore();\n\n  return (\n    <div className=\"fixed bottom-6 left-0 right-0 px-4 z-50 md:hidden\">\n      <nav className=\"mx-auto max-w-md bg-card/60 backdrop-blur-2xl border border-white/10 rounded-2xl shadow-[0_8px_32px_rgba(0,0,0,0.5)] p-2\">\n        <ul className=\"flex items-center justify-around\">\n          {navItems.map((item) => {\n            const Icon = item.icon;\n            const isActive = currentPage === item.id;\n            return (\n              <li key={item.id} className=\"relative\">\n                <button\n                  onClick={() => navigate(`/${item.id}`)}\n                  className={cn(\n                    \"flex flex-col items-center justify-center py-2 px-3 transition-all duration-300 rounded-xl relative z-10\",\n                    isActive ? \"text-primary\" : \"text-muted-foreground hover:text-foreground\"\n                  )}\n                >\n                  <Icon className={cn(\"h-5 w-5 mb-1\", isActive && \"scale-110\")} />\n                  <span className=\"text-[10px] font-medium\">{item.label}</span>\n\n                  {isActive && (\n                    <motion.div\n                      layoutId=\"active-pill\"\n                      className=\"absolute inset-0 bg-primary/10 rounded-xl -z-10\"\n                      transition={{ type: \"spring\", bounce: 0.2, duration: 0.6 }}\n                    />\n                  )}\n                </button>\n              </li>\n            );\n          })}\n        </ul>\n      </nav>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/kuba-ai/service-manager/src/layouts/DesktopLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/kuba-ai/service-manager/src/layouts/MainLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/kuba-ai/service-manager/src/layouts/MobileLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/kuba-ai/service-manager/src/layouts/TopNavigation.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/kuba-ai/service-manager/src/lib/db/schema.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":41,"column":10,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":41,"endColumn":13,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1123,1126],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1123,1126],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import Dexie from 'dexie';\nimport type { Client, Order, Quote, AppSettings, Activity } from '@/types';\n\nexport class ServiceDatabase extends Dexie {\n  clients!: Dexie.Table<Client>;\n  orders!: Dexie.Table<Order>;\n  quotes!: Dexie.Table<Quote>;\n  settings!: Dexie.Table<AppSettings>;\n  activities!: Dexie.Table<Activity>;\n\n  constructor() {\n    super('ServiceAppDB');\n\n    this.version(1).stores({\n      clients: 'id, name, phone, email, company, createdAt',\n      orders: 'id, orderNumber, clientId, status, startDate, createdAt',\n      quotes: 'id, quoteNumber, clientId, orderId, status, createdAt',\n      settings: 'key',\n      activities: 'id, type, action, timestamp',\n    });\n  }\n}\n\nexport const db = new ServiceDatabase();\n\nexport async function initializeDatabase() {\n  await db.open();\n\n  const settingsCount = await db.settings.count();\n  if (settingsCount === 0) {\n    await db.settings.bulkAdd([\n      {\n        key: 'app',\n        companyName: '',\n        companyAddress: '',\n        defaultVatRate: 23,\n        quoteValidDays: 30,\n        currency: 'PLN',\n        dateFormat: 'DD MMM YYYY',\n      },\n    ] as any);\n  }\n\n  return db;\n}\n\nexport async function resetDatabase() {\n  await db.delete();\n  await initializeDatabase();\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/kuba-ai/service-manager/src/lib/hooks/useApp.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/kuba-ai/service-manager/src/lib/hooks/useClients.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/kuba-ai/service-manager/src/lib/hooks/useOrders.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/kuba-ai/service-manager/src/lib/hooks/useQuotes.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_' is assigned a value but never used.","line":35,"column":20,"nodeType":null,"messageId":"unusedVar","endLine":35,"endColumn":21}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useLiveQuery } from 'dexie-react-hooks';\nimport { db } from '@/lib/db/schema';\nimport type { Quote, QuoteStatus } from '@/types';\nimport { calculateVAT } from '@/lib/utils/formatters';\n\nexport function useQuotes() {\n  const quotes = useLiveQuery(() => db.quotes.toArray());\n  return { quotes: quotes ?? [], isLoading: quotes === undefined };\n}\n\nexport function useQuotesByStatus(status?: QuoteStatus) {\n  const quotes = useLiveQuery(() => {\n    const query = status\n      ? db.quotes.where('status').equals(status)\n      : db.quotes.toCollection();\n    return query.toArray();\n  });\n\n  return { quotes: quotes ?? [], isLoading: quotes === undefined };\n}\n\nexport function useQuotesByClient(clientId: string) {\n  const quotes = useLiveQuery(() => db.quotes.where('clientId').equals(clientId).toArray());\n  return { quotes: quotes ?? [], isLoading: quotes === undefined };\n}\n\nexport function useQuoteById(id: string) {\n  const quote = useLiveQuery(() => db.quotes.get(id));\n  return { quote: quote ?? null, isLoading: quote === undefined };\n}\n\nexport function useCreateQuote() {\n  return async (quote: Omit<Quote, 'id' | 'quoteNumber' | 'createdAt' | 'updatedAt' | 'subtotal' | 'vatTotal' | 'total'>) => {\n    const items = quote.items || [];\n    const { items: _, ...quoteData } = quote;\n\n    const subtotal = items.reduce((sum, item) => sum + (item.quantity * item.unitPrice), 0);\n    const vatTotal = items.reduce((sum, item) => sum + calculateVAT(item.quantity * item.unitPrice, item.vatRate), 0);\n    const total = subtotal + vatTotal;\n\n    const quoteNumber = await generateQuoteNumber();\n\n    const newQuote: Quote = {\n      ...quoteData,\n      items,\n      id: crypto.randomUUID(),\n      quoteNumber,\n      subtotal,\n      vatTotal,\n      total,\n      createdAt: new Date().toISOString(),\n      updatedAt: new Date().toISOString(),\n    };\n\n    await db.quotes.add(newQuote);\n    await addActivity('quote', 'created', newQuote.id, quoteNumber);\n    return newQuote;\n  };\n}\n\nexport function useUpdateQuote() {\n  return async (id: string, updates: Partial<Omit<Quote, 'quoteNumber'>>) => {\n    const quote = await db.quotes.get(id);\n\n    if (quote && updates.items) {\n      const subtotal = updates.items.reduce((sum, item) => sum + (item.quantity * item.unitPrice), 0);\n      const vatTotal = updates.items.reduce((sum, item) => sum + calculateVAT(item.quantity * item.unitPrice, item.vatRate), 0);\n      const total = subtotal + vatTotal;\n\n      await db.quotes.update(id, {\n        ...updates,\n        subtotal,\n        vatTotal,\n        total,\n        updatedAt: new Date().toISOString(),\n      });\n    } else {\n      await db.quotes.update(id, {\n        ...updates,\n        updatedAt: new Date().toISOString(),\n      });\n    }\n  };\n}\n\nexport function useUpdateQuoteStatus() {\n  return async (id: string, status: QuoteStatus) => {\n    await db.quotes.update(id, {\n      status,\n      updatedAt: new Date().toISOString(),\n    });\n  };\n}\n\nexport function useDeleteQuote() {\n  return async (id: string) => {\n    const quote = await db.quotes.get(id);\n    if (quote) {\n      await db.quotes.delete(id);\n      await addActivity('quote', 'deleted', id, quote.quoteNumber);\n    }\n  };\n}\n\nasync function generateQuoteNumber(): Promise<string> {\n  const year = new Date().getFullYear();\n  const prefix = `KS/${year}/`;\n\n  const existingQuotes = await db.quotes\n    .filter((quote) => quote.quoteNumber.startsWith(prefix))\n    .toArray();\n\n  const maxNumber = existingQuotes.reduce((max, quote) => {\n    const num = parseInt(quote.quoteNumber.split('/')[2] || '0');\n    return num > max ? num : max;\n  }, 0);\n\n  const nextNumber = (maxNumber + 1).toString().padStart(4, '0');\n  return `${prefix}${nextNumber}`;\n}\n\nasync function addActivity(type: 'quote', action: 'created' | 'updated' | 'deleted', itemId: string, itemName: string) {\n  await db.activities.add({\n    id: crypto.randomUUID(),\n    type,\n    action,\n    itemId,\n    itemName,\n    timestamp: new Date().toISOString(),\n  });\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/kuba-ai/service-manager/src/lib/hooks/useToast.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/kuba-ai/service-manager/src/lib/pdf/generateQuotePDF.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":80,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":80,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3142,3145],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3142,3145],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import jsPDF from 'jspdf';\nimport autoTable from 'jspdf-autotable';\nimport type { Quote, Client } from '@/types';\nimport { formatDate, formatCurrency } from '@/lib/utils/formatters';\n\nexport async function generateQuotePDF(quote: Quote, client: Client, settings?: { companyName: string; companyAddress: string; companyNip?: string; companyPhone?: string; companyEmail?: string; }) {\n  const companyName = settings?.companyName || '';\n  const companyAddress = settings?.companyAddress || '';\n  const companyNip = settings?.companyNip || '';\n  const companyPhone = settings?.companyPhone || '';\n  const companyEmail = settings?.companyEmail || '';\n\n  const doc = new jsPDF();  \n  const pageWidth = doc.internal.pageSize.getWidth();\n  const pageHeight = doc.internal.pageSize.getHeight();\n  const margin = 20;\n\n  doc.setFontSize(20);\n  doc.text('KOSZTORYS', pageWidth / 2, 30, { align: 'center' });  \n  doc.setFontSize(12);\n  doc.text(`Nr: ${quote.quoteNumber}`, pageWidth - margin, 50, { align: 'right' });\n  doc.text(`Data: ${formatDate(quote.createdAt)}`, pageWidth - margin, 57, { align: 'right' });\n  if (quote.validUntil) {\n    doc.text(`Waźny do: ${formatDate(quote.validUntil)}`, pageWidth - margin, 64, { align: 'right' });\n  }\n\n  doc.setFontSize(10);\n  doc.setFont('helvetica', 'bold');\n  doc.text('Sprzedawca:', margin, 80);\n  doc.setFont('helvetica', 'normal');\n  doc.text(companyName, margin, 86);\n  if (companyAddress) doc.text(companyAddress, margin, 92);\n  if (companyNip) doc.text(`NIP: ${companyNip}`, margin, 98);\n  if (companyPhone) doc.text(`Tel: ${companyPhone}`, margin, 104);\n  if (companyEmail) doc.text(`Email: ${companyEmail}`, margin, 110);\n\n  doc.setFont('helvetica', 'bold');\n  doc.text('Nabywca:', margin, 125);\n  doc.setFont('helvetica', 'normal');\n  doc.text(client.name, margin, 131);\n  if (client.company) doc.text(client.company, margin, 137);\n  if (client.address) doc.text(client.address, margin, 143);\n  if (client.nip) doc.text(`NIP: ${client.nip}`, margin, 149);\n  if (client.email) doc.text(`Email: ${client.email}`, margin, 155);\n  if (client.phone) doc.text(`Tel: ${client.phone}`, margin, 161);\n\n  autoTable(doc, {\n    startY: 175,\n    head: [['Lp', 'Nazwa towaru/usługi', 'Ilość', 'Jedn.', 'Cena jedn. (PLN)', 'VAT (%)', 'Wartość (PLN)']],\n    body: quote.items.map((item, index) => [\n      index + 1,\n      item.name + (item.description ? `\\n${item.description}` : ''),\n      item.quantity.toString(),\n      item.unit,\n      item.unitPrice.toFixed(2),\n      item.vatRate,\n      (item.quantity * item.unitPrice).toFixed(2),\n    ]),\n    columnStyles: {\n      0: { cellWidth: 10, halign: 'center' },\n      1: { cellWidth: 'auto' },\n      2: { cellWidth: 20, halign: 'center' },\n      3: { cellWidth: 20, halign: 'center' },\n      4: { cellWidth: 30, halign: 'right' },\n      5: { cellWidth: 20, halign: 'center' },\n      6: { cellWidth: 30, halign: 'right' },\n    },\n    headStyles: {\n      fillColor: [37, 99, 235],\n      textColor: [255, 255, 255],\n      fontStyle: 'bold',\n      halign: 'center',\n    },\n    styles: {\n      fontSize: 9,\n      cellPadding: 3,\n    },\n  });\n\n  const finalY = (doc as any).lastAutoTable.finalY + 15;\n\n  doc.setFont('helvetica', 'bold');\n  doc.setFontSize(10);\n  doc.text('Podsumowanie:', margin, finalY);\n\n  doc.setFont('helvetica', 'normal');\n  doc.text(`Wartość netto: ${formatCurrency(quote.subtotal)}`, margin, finalY + 6);\n  doc.text(`VAT: ${formatCurrency(quote.vatTotal)}`, margin, finalY + 12);\n  doc.setFont('helvetica', 'bold');\n  doc.setFontSize(12);\n  doc.text(`Wartość brutto: ${formatCurrency(quote.total)}`, margin, finalY + 20);\n\n  if (quote.notes) {\n    doc.setFontSize(10);\n    doc.setFont('helvetica', 'bold');\n    doc.text('Uwagi:', margin, finalY + 35);\n    doc.setFont('helvetica', 'normal');\n    const splitNotes = doc.splitTextToSize(quote.notes, pageWidth - 2 * margin);\n    doc.text(splitNotes, margin, finalY + 41);\n  }\n\n  doc.setFontSize(8);\n  doc.setTextColor(128, 128, 128);\n  const footerText = [\n    'Kosztorys wygenerowany przez Manager Usług',\n    `Data generowania: ${formatDate(new Date())}`,\n  ];\n  footerText.forEach((text, index) => {\n    doc.text(text, margin, pageHeight - 15 - (index * 5));\n  });\n\n  doc.save(`kosztorys-${quote.quoteNumber.replace(new RegExp('/', 'g'), '-')}.pdf`);\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/kuba-ai/service-manager/src/lib/stores/uiStore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/kuba-ai/service-manager/src/lib/utils/cn.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/kuba-ai/service-manager/src/lib/utils/formatters.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/kuba-ai/service-manager/src/lib/utils/imageUtils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/kuba-ai/service-manager/src/main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/kuba-ai/service-manager/src/pages/CalendarPage.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Clock' is defined but never used.","line":12,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":10},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'AnimatePresence' is defined but never used.","line":30,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":30,"endColumn":33},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'cloneDay' is assigned a value but never used.","line":108,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":108,"endColumn":31}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\nimport { useOrders } from '@/lib/hooks/useOrders';\nimport { useUIStore } from '@/lib/stores/uiStore';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport {\n    ChevronLeft,\n    ChevronRight,\n    Calendar as CalendarIcon,\n    Tag,\n    MapPin,\n    Clock\n} from 'lucide-react';\nimport {\n    format,\n    addMonths,\n    subMonths,\n    startOfMonth,\n    endOfMonth,\n    startOfWeek,\n    endOfWeek,\n    isSameMonth,\n    isSameDay,\n    addDays,\n    isWithinInterval,\n    parseISO\n} from 'date-fns';\nimport { pl } from 'date-fns/locale';\nimport { useNavigate } from 'react-router-dom';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { cn } from '@/lib/utils/cn';\nimport StatusBadge from '@/components/orders/StatusBadge';\n\nexport default function CalendarPage() {\n    const [currentMonth, setCurrentMonth] = useState(new Date());\n    const { orders } = useOrders();\n    const { setCurrentPage } = useUIStore();\n    const navigate = useNavigate();\n\n    useEffect(() => {\n        setCurrentPage('calendar');\n    }, [setCurrentPage]);\n\n    const nextMonth = () => setCurrentMonth(addMonths(currentMonth, 1));\n    const prevMonth = () => setCurrentMonth(subMonths(currentMonth, 1));\n\n    const renderHeader = () => {\n        return (\n            <div className=\"flex items-center justify-between mb-8\">\n                <div className=\"flex items-center gap-3\">\n                    <div className=\"h-12 w-12 rounded-2xl bg-primary/10 flex items-center justify-center\">\n                        <CalendarIcon className=\"h-6 w-6 text-primary\" />\n                    </div>\n                    <div>\n                        <h1 className=\"text-3xl font-bold tracking-tight capitalize\">\n                            {format(currentMonth, 'LLLL yyyy', { locale: pl })}\n                        </h1>\n                        <p className=\"text-muted-foreground\">Terminarz zleceń i projektów</p>\n                    </div>\n                </div>\n                <div className=\"flex items-center gap-2 bg-white/5 p-1 rounded-xl border border-white/5\">\n                    <Button variant=\"ghost\" size=\"icon\" onClick={prevMonth} className=\"h-9 w-9\">\n                        <ChevronLeft className=\"h-5 w-5\" />\n                    </Button>\n                    <Button\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        onClick={() => setCurrentMonth(new Date())}\n                        className=\"px-4 font-medium\"\n                    >\n                        Dzisiaj\n                    </Button>\n                    <Button variant=\"ghost\" size=\"icon\" onClick={nextMonth} className=\"h-9 w-9\">\n                        <ChevronRight className=\"h-5 w-5\" />\n                    </Button>\n                </div>\n            </div>\n        );\n    };\n\n    const renderDays = () => {\n        const days = ['Pon', 'Wt', 'Śr', 'Czw', 'Pt', 'Sob', 'Ndz'];\n        return (\n            <div className=\"grid grid-cols-7 mb-2\">\n                {days.map((day, i) => (\n                    <div key={i} className=\"text-center text-xs font-bold text-muted-foreground uppercase tracking-wider py-2\">\n                        {day}\n                    </div>\n                ))}\n            </div>\n        );\n    };\n\n    const renderCells = () => {\n        const monthStart = startOfMonth(currentMonth);\n        const monthEnd = endOfMonth(monthStart);\n        const startDate = startOfWeek(monthStart, { weekStartsOn: 1 });\n        const endDate = endOfWeek(monthEnd, { weekStartsOn: 1 });\n\n        const rows = [];\n        let days = [];\n        let day = startDate;\n        let formattedDate = \"\";\n\n        while (day <= endDate) {\n            for (let i = 0; i < 7; i++) {\n                formattedDate = format(day, \"d\");\n                const cloneDay = day;\n\n                // Find orders occurring on this day\n                const dayOrders = orders.filter(order => {\n                    const start = parseISO(order.startDate);\n                    const end = order.endDate ? parseISO(order.endDate) : start;\n                    return isSameDay(day, start) || isSameDay(day, end) ||\n                        isWithinInterval(day, { start, end });\n                });\n\n                days.push(\n                    <div\n                        key={day.toString()}\n                        className={cn(\n                            \"relative min-h-[120px] border border-white/5 p-2 transition-colors\",\n                            !isSameMonth(day, monthStart) ? \"bg-black/20 opacity-30\" : \"bg-white/[0.02]\",\n                            isSameDay(day, new Date()) && \"bg-primary/5 ring-1 ring-inset ring-primary/20\"\n                        )}\n                    >\n                        <span className={cn(\n                            \"text-sm font-medium\",\n                            isSameDay(day, new Date()) && \"text-primary font-bold\"\n                        )}>\n                            {formattedDate}\n                        </span>\n\n                        <div className=\"mt-2 space-y-1\">\n                            {dayOrders.slice(0, 3).map((order) => (\n                                <motion.div\n                                    layoutId={order.id}\n                                    key={order.id}\n                                    onClick={() => navigate(`/orders/${order.id}`)}\n                                    className={cn(\n                                        \"text-[10px] p-1.5 rounded-lg border border-white/5 cursor-pointer truncate transition-transform hover:scale-[1.02] active:scale-[0.98]\",\n                                        order.status === 'ukończone' ? \"bg-emerald-500/10 text-emerald-500\" :\n                                            order.status === 'w trakcie' ? \"bg-blue-500/10 text-blue-500\" :\n                                                \"bg-orange-500/10 text-orange-500\"\n                                    )}\n                                >\n                                    {order.title}\n                                </motion.div>\n                            ))}\n                            {dayOrders.length > 3 && (\n                                <div className=\"text-[10px] text-muted-foreground text-center pt-1 font-medium\">\n                                    + {dayOrders.length - 3} więcej\n                                </div>\n                            )}\n                        </div>\n                    </div>\n                );\n                day = addDays(day, 1);\n            }\n            rows.push(\n                <div className=\"grid grid-cols-7\" key={day.toString()}>\n                    {days}\n                </div>\n            );\n            days = [];\n        }\n        return <div className=\"rounded-2xl overflow-hidden border border-white/10 shadow-2xl\">{rows}</div>;\n    };\n\n    return (\n        <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            className=\"container mx-auto p-4 md:p-12\"\n        >\n            {renderHeader()}\n\n            <div className=\"grid lg:grid-cols-4 gap-8\">\n                <div className=\"lg:col-span-3\">\n                    {renderDays()}\n                    {renderCells()}\n                </div>\n\n                <div className=\"space-y-6\">\n                    <Card className=\"border-white/5 bg-white/5 backdrop-blur-md\">\n                        <CardHeader>\n                            <CardTitle className=\"text-lg\">Nadchodzące zlecenia</CardTitle>\n                        </CardHeader>\n                        <CardContent className=\"space-y-4\">\n                            {orders\n                                .filter(o => parseISO(o.startDate) >= new Date())\n                                .sort((a, b) => parseISO(a.startDate).getTime() - parseISO(b.startDate).getTime())\n                                .slice(0, 5)\n                                .map(order => (\n                                    <div\n                                        key={order.id}\n                                        onClick={() => navigate(`/orders/${order.id}`)}\n                                        className=\"group p-3 rounded-xl border border-white/5 hover:bg-white/5 cursor-pointer transition-all\"\n                                    >\n                                        <div className=\"flex items-center justify-between mb-2\">\n                                            <StatusBadge status={order.status} />\n                                            <span className=\"text-[10px] text-muted-foreground font-mono\">{format(parseISO(order.startDate), 'dd.MM')}</span>\n                                        </div>\n                                        <p className=\"font-bold text-sm truncate group-hover:text-primary transition-colors\">{order.title}</p>\n                                        {order.address && (\n                                            <p className=\"text-[11px] text-muted-foreground mt-1 flex items-center\">\n                                                <MapPin className=\"h-3 w-3 mr-1\" /> {order.address}\n                                            </p>\n                                        )}\n                                    </div>\n                                ))}\n                            {orders.length === 0 && (\n                                <p className=\"text-center text-sm text-muted-foreground py-8 italic\">Brak nadchodzących zleceń.</p>\n                            )}\n                        </CardContent>\n                    </Card>\n\n                    <Card className=\"border-white/5 bg-white/5 overflow-hidden\">\n                        <div className=\"p-4 bg-primary/10\">\n                            <h3 className=\"text-sm font-bold flex items-center gap-2\">\n                                <Tag className=\"h-4 w-4 text-primary\" />\n                                Legenda\n                            </h3>\n                        </div>\n                        <CardContent className=\"p-4 space-y-2\">\n                            {[\n                                { label: 'Ukończone', color: 'bg-emerald-500' },\n                                { label: 'W trakcie', color: 'bg-blue-500' },\n                                { label: 'Oczekujące / Nowe', color: 'bg-orange-500' },\n                            ].map((item, i) => (\n                                <div key={i} className=\"flex items-center gap-3\">\n                                    <div className={cn(\"h-2 w-2 rounded-full\", item.color)} />\n                                    <span className=\"text-xs text-muted-foreground\">{item.label}</span>\n                                </div>\n                            ))}\n                        </CardContent>\n                    </Card>\n                </div>\n            </div>\n        </motion.div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/kuba-ai/service-manager/src/pages/ClientsPage.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'searchClients' is defined but never used.","line":3,"column":39,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":52}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useClients, useDeleteClient, searchClients } from '@/lib/hooks/useClients';\nimport { useUIStore } from '@/lib/stores/uiStore';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Input } from '@/components/ui/input';\nimport { Button } from '@/components/ui/button';\nimport { Dialog, DialogContent, DialogTrigger } from '@/components/ui/dialog';\nimport { Search, Plus, Phone, Mail, MapPin, Trash2, Edit, History } from 'lucide-react';\nimport { useToast } from '@/lib/hooks/useToast';\nimport AddClientDialog from '@/components/clients/AddClientDialog';\nimport EditClientDialog from '@/components/clients/EditClientDialog';\nimport { Client } from '@/types';\n\nexport default function ClientsPage() {\n  const navigate = useNavigate();\n  const { clients, isLoading } = useClients();\n  const deleteClient = useDeleteClient();\n  const [searchQuery, setSearchQuery] = useState('');\n  const [selectedClient, setSelectedClient] = useState<Client | null>(null);\n  const [isAddDialogOpen, setIsAddDialogOpen] = useState(false);\n  const [isEditDialogOpen, setIsEditDialogOpen] = useState(false);\n  const { setCurrentPage, setClientSearchQuery } = useUIStore();\n  const { toast } = useToast();\n\n  const filteredClients = searchQuery.trim() === ''\n    ? clients\n    : clients.filter(c =>\n      c.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      c.phone.includes(searchQuery) ||\n      (c.email && c.email.toLowerCase().includes(searchQuery.toLowerCase())) ||\n      (c.company && c.company.toLowerCase().includes(searchQuery.toLowerCase()))\n    );\n\n  const handleSearch = (query: string) => {\n    setSearchQuery(query);\n    setClientSearchQuery(query);\n  };\n\n  const handleDelete = async (clientId: string) => {\n    if (confirm('Czy na pewno chcesz usunąć tego klienta?')) {\n      await deleteClient(clientId);\n      toast({\n        title: 'Sukces',\n        description: 'Klient został usunięty',\n        variant: 'success',\n      });\n      handleSearch(searchQuery);\n    }\n  };\n\n  useEffect(() => {\n    setCurrentPage('clients');\n  }, [setCurrentPage]);\n\n  const handleCall = (phone: string) => {\n    window.location.assign(`tel:${phone}`);\n  };\n\n  const handleSMS = (phone: string) => {\n    window.location.assign(`sms:${phone}`);\n  };\n\n  const handleEmail = (email: string) => {\n    window.location.assign(`mailto:${email}`);\n  };\n\n  if (isLoading) {\n    return <div className=\"p-4\">Ładowanie...</div>;\n  }\n\n  return (\n    <div className=\"container mx-auto p-4 md:p-8 space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold\">Klienci</h1>\n          <p className=\"text-muted-foreground\">Zarządzaj bazą klientów</p>\n        </div>\n        <Dialog open={isAddDialogOpen} onOpenChange={setIsAddDialogOpen}>\n          <DialogTrigger asChild>\n            <Button>\n              <Plus className=\"mr-2 h-4 w-4\" />\n              Dodaj klienta\n            </Button>\n          </DialogTrigger>\n          <DialogContent className=\"max-w-md\">\n            <AddClientDialog onClose={() => setIsAddDialogOpen(false)} />\n          </DialogContent>\n        </Dialog>\n      </div>\n\n      <div className=\"relative\">\n        <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n        <Input\n          placeholder=\"Szukaj po nazwie, telefonie lub email...\"\n          value={searchQuery}\n          onChange={(e) => handleSearch(e.target.value)}\n          className=\"pl-10\"\n        />\n      </div>\n\n      {filteredClients.length === 0 ? (\n        <Card>\n          <CardContent className=\"flex flex-col items-center justify-center py-12\">\n            <p className=\"text-muted-foreground text-center\">\n              {searchQuery ? 'Nie znaleziono klientów' : 'Brak klientów. Dodaj pierwszego klienta!'}\n            </p>\n          </CardContent>\n        </Card>\n      ) : (\n        <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\n          {filteredClients.map((client) => (\n            <Card key={client.id} className=\"hover:shadow-lg transition-shadow\">\n              <CardHeader>\n                <CardTitle className=\"text-lg\">{client.name}</CardTitle>\n                {client.company && <p className=\"text-sm text-muted-foreground\">{client.company}</p>}\n              </CardHeader>\n              <CardContent className=\"space-y-3\">\n                {client.email && (\n                  <div className=\"flex items-center text-sm\">\n                    <Mail className=\"mr-2 h-4 w-4 text-muted-foreground\" />\n                    <span className=\"truncate flex-1\">{client.email}</span>\n                  </div>\n                )}\n                <div className=\"flex items-center text-sm\">\n                  <Phone className=\"mr-2 h-4 w-4 text-muted-foreground\" />\n                  <span>{client.phone}</span>\n                </div>\n                {client.address && (\n                  <div className=\"flex items-start text-sm\">\n                    <MapPin className=\"mr-2 h-4 w-4 text-muted-foreground mt-0.5\" />\n                    <span className=\"flex-1\">{client.address}</span>\n                  </div>\n                )}\n\n                <div className=\"flex gap-2 pt-2\">\n                  <Button\n                    variant=\"outline\"\n                    size=\"icon\"\n                    className=\"flex-1\"\n                    onClick={() => handleCall(client.phone)}\n                    title=\"Zadzwoń\"\n                  >\n                    <Phone className=\"h-4 w-4\" />\n                  </Button>\n                  <Button\n                    variant=\"outline\"\n                    size=\"icon\"\n                    className=\"flex-1\"\n                    onClick={() => handleSMS(client.phone)}\n                    title=\"SMS\"\n                  >\n                    <Phone className=\"h-4 w-4\" />\n                  </Button>\n                  {client.email && (\n                    <Button\n                      variant=\"outline\"\n                      size=\"icon\"\n                      className=\"flex-1\"\n                      onClick={() => handleEmail(client.email)}\n                      title=\"Email\"\n                    >\n                      <Mail className=\"h-4 w-4\" />\n                    </Button>\n                  )}\n                  <Button\n                    variant=\"outline\"\n                    size=\"icon\"\n                    className=\"flex-1\"\n                    onClick={() => navigate(`/clients/${client.id}`)}\n                    title=\"Historia\"\n                  >\n                    <History className=\"h-4 w-4\" />\n                  </Button>\n                  <Button\n                    variant=\"outline\"\n                    size=\"icon\"\n                    className=\"flex-1\"\n                    onClick={() => {\n                      setSelectedClient(client);\n                      setIsEditDialogOpen(true);\n                    }}\n                    title=\"Edytuj\"\n                  >\n                    <Edit className=\"h-4 w-4\" />\n                  </Button>\n                  <Button\n                    variant=\"outline\"\n                    size=\"icon\"\n                    className=\"flex-1 text-destructive hover:text-destructive\"\n                    onClick={() => handleDelete(client.id)}\n                    title=\"Usuń\"\n                  >\n                    <Trash2 className=\"h-4 w-4\" />\n                  </Button>\n                </div>\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      )}\n\n      <Dialog open={isEditDialogOpen} onOpenChange={setIsEditDialogOpen}>\n        <DialogContent className=\"max-w-md\">\n          {selectedClient && (\n            <EditClientDialog\n              client={selectedClient}\n              onClose={() => {\n                setIsEditDialogOpen(false);\n                setSelectedClient(null);\n              }}\n            />\n          )}\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/kuba-ai/service-manager/src/pages/DashboardPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/kuba-ai/service-manager/src/pages/OrderDetailsPage.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":77,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":77,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2749,2752],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2749,2752],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useOrderById, useUpdateOrder, useDeleteOrder, useUpdateOrderTasks } from '@/lib/hooks/useOrders';\nimport { useClients } from '@/lib/hooks/useClients';\nimport { useUIStore } from '@/lib/stores/uiStore';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Dialog, DialogContent } from '@/components/ui/dialog';\nimport {\n    ArrowLeft,\n    MapPin,\n    Calendar,\n    Clock,\n    Edit,\n    Trash2,\n    FileText,\n    User,\n    Phone,\n    Mail\n} from 'lucide-react';\nimport { formatCurrency, formatDate } from '@/lib/utils/formatters';\nimport { useToast } from '@/lib/hooks/useToast';\nimport StatusBadge from '@/components/orders/StatusBadge';\nimport EditOrderDialog from '@/components/orders/EditOrderDialog';\nimport OrderGallery from '@/components/orders/OrderGallery';\nimport { motion } from 'framer-motion';\nimport { OrderChecklist } from '@/components/orders/OrderChecklist';\n\nexport default function OrderDetailsPage() {\n    const { id } = useParams<{ id: string }>();\n    const navigate = useNavigate();\n    const { order, isLoading: isOrderLoading } = useOrderById(id!);\n    const { clients } = useClients();\n    const updateOrder = useUpdateOrder();\n    const updateOrderTasks = useUpdateOrderTasks();\n    const deleteOrder = useDeleteOrder();\n    const { setCurrentPage } = useUIStore();\n    const { toast } = useToast();\n\n    const [isEditDialogOpen, setIsEditDialogOpen] = useState(false);\n\n    useEffect(() => {\n        setCurrentPage('orders');\n    }, [setCurrentPage]);\n\n    if (isOrderLoading) {\n        return <div className=\"p-8 text-center\">Ładowanie szczegółów zlecenia...</div>;\n    }\n\n    if (!order) {\n        return (\n            <div className=\"container mx-auto p-8 text-center space-y-4\">\n                <p className=\"text-xl\">Nie znaleziono zlecenia.</p>\n                <Button onClick={() => navigate('/orders')}>Powrót do listy</Button>\n            </div>\n        );\n    }\n\n    const client = clients.find(c => c.id === order.clientId);\n\n    const handleDelete = async () => {\n        if (confirm('Czy na pewno chcesz usunąć to zlecenie? Wszystkie zdjęcia zostaną utracone.')) {\n            await deleteOrder(order.id);\n            toast({\n                title: 'Sukces',\n                description: 'Zlecenie zostało usunięte',\n                variant: 'success',\n            });\n            navigate('/orders');\n        }\n    };\n\n    const handleImagesChange = async (images: { before: string[]; after: string[] }) => {\n        await updateOrder(order.id, { images });\n    };\n\n    const handleTasksUpdate = async (tasks: any[]) => {\n        await updateOrderTasks(order.id, tasks);\n    };\n\n    return (\n        <motion.div\n            initial={{ opacity: 0, y: 10 }}\n            animate={{ opacity: 1, y: 0 }}\n            className=\"container mx-auto p-4 md:p-8 space-y-8\"\n        >\n            <div className=\"flex items-center justify-between\">\n                <Button variant=\"ghost\" onClick={() => navigate('/orders')} className=\"group\">\n                    <ArrowLeft className=\"mr-2 h-4 w-4 group-hover:-translate-x-1 transition-transform\" />\n                    Powrót\n                </Button>\n                <div className=\"flex space-x-2\">\n                    <Button variant=\"outline\" size=\"sm\" onClick={() => setIsEditDialogOpen(true)}>\n                        <Edit className=\"mr-2 h-4 w-4\" /> Edytuj\n                    </Button>\n                    <Button variant=\"outline\" size=\"sm\" className=\"text-destructive hover:bg-destructive/10\" onClick={handleDelete}>\n                        <Trash2 className=\"mr-2 h-4 w-4\" /> Usuń\n                    </Button>\n                </div>\n            </div>\n\n            <div className=\"grid gap-8 md:grid-cols-3\">\n                <div className=\"md:col-span-2 space-y-8\">\n                    <Card className=\"overflow-hidden border-white/5 bg-gradient-to-br from-white/[0.03] to-transparent\">\n                        <CardHeader className=\"pb-4\">\n                            <div className=\"flex items-start justify-between\">\n                                <div className=\"space-y-1\">\n                                    <div className=\"flex items-center space-x-2\">\n                                        <span className=\"text-xs font-mono text-muted-foreground\">{order.orderNumber}</span>\n                                        <StatusBadge status={order.status} />\n                                    </div>\n                                    <CardTitle className=\"text-3xl font-bold\">{order.title}</CardTitle>\n                                </div>\n                                {order.value && (\n                                    <div className=\"text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-primary to-primary/60\">\n                                        {formatCurrency(order.value)}\n                                    </div>\n                                )}\n                            </div>\n                        </CardHeader>\n                        <CardContent className=\"space-y-6\">\n                            <div className=\"p-4 rounded-xl bg-white/5 border border-white/5\">\n                                <p className=\"text-muted-foreground whitespace-pre-wrap\">{order.description || 'Brak opisu.'}</p>\n                            </div>\n\n                            <div className=\"grid grid-cols-2 gap-4\">\n                                <div className=\"flex items-center space-x-3 text-sm\">\n                                    <div className=\"p-2 rounded-lg bg-white/5\">\n                                        <Calendar className=\"h-4 w-4 text-muted-foreground\" />\n                                    </div>\n                                    <div>\n                                        <p className=\"text-xs text-muted-foreground\">Rozpoczęcie</p>\n                                        <p className=\"font-medium\">{formatDate(order.startDate)}</p>\n                                    </div>\n                                </div>\n                                {order.endDate && (\n                                    <div className=\"flex items-center space-x-3 text-sm\">\n                                        <div className=\"p-2 rounded-lg bg-white/5\">\n                                            <Clock className=\"h-4 w-4 text-muted-foreground\" />\n                                        </div>\n                                        <div>\n                                            <p className=\"text-xs text-muted-foreground\">Zakończenie</p>\n                                            <p className=\"font-medium\">{formatDate(order.endDate)}</p>\n                                        </div>\n                                    </div>\n                                )}\n                                {order.address && (\n                                    <div className=\"col-span-2 flex items-center space-x-3 text-sm\">\n                                        <div className=\"p-2 rounded-lg bg-white/5\">\n                                            <MapPin className=\"h-4 w-4 text-muted-foreground\" />\n                                        </div>\n                                        <div>\n                                            <p className=\"text-xs text-muted-foreground\">Lokalizacja</p>\n                                            <p className=\"font-medium\">{order.address}</p>\n                                        </div>\n                                    </div>\n                                )}\n                            </div>\n                        </CardContent>\n                    </Card>\n\n                    <OrderChecklist\n                        tasks={order.tasks || []}\n                        onUpdate={handleTasksUpdate}\n                    />\n\n                    <div className=\"space-y-4\">\n                        <h2 className=\"text-2xl font-bold flex items-center\">\n                            <ImageIcon className=\"mr-3 h-6 w-6 text-primary\" />\n                            Galeria Realizacji\n                        </h2>\n                        <OrderGallery images={order.images} onImagesChange={handleImagesChange} />\n                    </div>\n                </div>\n\n                <div className=\"space-y-8\">\n                    <Card className=\"border-white/5 bg-white/5\">\n                        <CardHeader>\n                            <CardTitle className=\"text-lg flex items-center\">\n                                <User className=\"mr-2 h-5 w-5 text-primary\" />\n                                Klient\n                            </CardTitle>\n                        </CardHeader>\n                        <CardContent className=\"space-y-4\">\n                            {client ? (\n                                <>\n                                    <div>\n                                        <p className=\"font-bold text-lg\">{client.name}</p>\n                                        {client.company && <p className=\"text-sm text-muted-foreground\">{client.company}</p>}\n                                    </div>\n                                    <div className=\"space-y-2 pt-2\">\n                                        <Button variant=\"ghost\" className=\"w-full justify-start h-9 px-2 hover:bg-white/10\" asChild>\n                                            <a href={`tel:${client.phone}`}>\n                                                <Phone className=\"mr-3 h-4 w-4 text-muted-foreground\" />\n                                                {client.phone}\n                                            </a>\n                                        </Button>\n                                        {client.email && (\n                                            <Button variant=\"ghost\" className=\"w-full justify-start h-9 px-2 hover:bg-white/10\" asChild>\n                                                <a href={`mailto:${client.email}`}>\n                                                    <Mail className=\"mr-3 h-4 w-4 text-muted-foreground\" />\n                                                    {client.email}\n                                                </a>\n                                            </Button>\n                                        )}\n                                    </div>\n                                </>\n                            ) : (\n                                <p className=\"text-sm text-red-400\">Brak przypisanego klienta</p>\n                            )}\n                        </CardContent>\n                    </Card>\n\n                    <Card className=\"border-white/5 bg-white/5\">\n                        <CardHeader>\n                            <CardTitle className=\"text-lg flex items-center\">\n                                <FileText className=\"mr-2 h-5 w-5 text-primary\" />\n                                Szybkie akcje\n                            </CardTitle>\n                        </CardHeader>\n                        <CardContent className=\"space-y-3\">\n                            <Button\n                                variant=\"outline\"\n                                className=\"w-full justify-start\"\n                                onClick={() => navigate(`/quotes/new?orderId=${order.id}`)}\n                            >\n                                <FileText className=\"mr-2 h-4 w-4\" />\n                                Utwórz kosztorys\n                            </Button>\n                        </CardContent>\n                    </Card>\n                </div>\n            </div>\n\n            <Dialog open={isEditDialogOpen} onOpenChange={setIsEditDialogOpen}>\n                <DialogContent className=\"max-w-md\">\n                    <EditOrderDialog\n                        order={order}\n                        onClose={() => setIsEditDialogOpen(false)}\n                    />\n                </DialogContent>\n            </Dialog>\n        </motion.div>\n    );\n}\n\n// Sprawdź brakujące importy\nimport { Image as ImageIcon } from 'lucide-react';\n","usedDeprecatedRules":[]},{"filePath":"/home/kuba-ai/service-manager/src/pages/OrdersPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/kuba-ai/service-manager/src/pages/QuotesPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/kuba-ai/service-manager/src/pages/ReportsPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/kuba-ai/service-manager/src/pages/SettingsPage.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/home/kuba-ai/service-manager/src/pages/SettingsPage.tsx:38:7\n  36 |   useEffect(() => {\n  37 |     if (settings) {\n> 38 |       setFormData({\n     |       ^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  39 |         companyName: settings.companyName || '',\n  40 |         companyAddress: settings.companyAddress || '',\n  41 |         companyNip: settings.companyNip || '',","line":38,"column":7,"nodeType":null,"endLine":38,"endColumn":18}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\nimport { useSettings, useUpdateSettings } from '@/lib/hooks/useApp';\nimport { Input } from '@/components/ui/input';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { useToast } from '@/lib/hooks/useToast';\nimport { useUIStore } from '@/lib/stores/uiStore';\nimport { Save, Database, Trash2, FileDown, FileUp } from 'lucide-react';\nimport { useCreateDemoData, useExportData, useImportData } from '@/lib/hooks/useApp';\n\nexport default function SettingsPage() {\n  const { settings, isLoading } = useSettings();\n  const updateSettings = useUpdateSettings();\n  const createDemoData = useCreateDemoData();\n  const exportData = useExportData();\n  const importData = useImportData();\n  const { toast } = useToast();\n  const { setCurrentPage } = useUIStore();\n\n  const [formData, setFormData] = useState({\n    companyName: '',\n    companyAddress: '',\n    companyNip: '',\n    companyPhone: '',\n    companyEmail: '',\n    defaultVatRate: 23,\n    quoteValidDays: 30,\n    currency: 'PLN',\n    dateFormat: 'DD MMM YYYY',\n  });\n\n  useEffect(() => {\n    setCurrentPage('settings');\n  }, [setCurrentPage]);\n\n  useEffect(() => {\n    if (settings) {\n      setFormData({\n        companyName: settings.companyName || '',\n        companyAddress: settings.companyAddress || '',\n        companyNip: settings.companyNip || '',\n        companyPhone: settings.companyPhone || '',\n        companyEmail: settings.companyEmail || '',\n        defaultVatRate: settings.defaultVatRate || 23,\n        quoteValidDays: settings.quoteValidDays || 30,\n        currency: settings.currency || 'PLN',\n        dateFormat: settings.dateFormat || 'DD MMM YYYY',\n      });\n    }\n  }, [settings]);\n\n  const handleSave = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    try {\n      await updateSettings(formData);\n      toast({\n        title: 'Sukces',\n        description: 'Ustawienia zostały zapisane',\n        variant: 'success',\n      });\n    } catch {\n      toast({\n        title: 'Błąd',\n        description: 'Wystąpił błąd podczas zapisywania ustawień',\n        variant: 'destructive',\n      });\n    }\n  };\n\n  const handleGenerateDemoData = async () => {\n    if (confirm('Czy na pewno chcesz wygenerować dane testowe? Spowoduje to dodanie przykładowych danych.')) {\n      try {\n        await createDemoData();\n        toast({\n          title: 'Sukces',\n          description: 'Dane testowe zostały wygenerowane',\n          variant: 'success',\n        });\n      } catch {\n        toast({\n          title: 'Błąd',\n          description: 'Wystąpił błąd podczas generowania danych',\n          variant: 'destructive',\n        });\n      }\n    }\n  };\n\n  const handleImport = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      try {\n        await importData(file);\n        toast({\n          title: 'Sukces',\n          description: 'Dane zostały zaimportowane',\n          variant: 'success',\n        });\n      } catch {\n        toast({\n          title: 'Błąd',\n          description: 'Wystąpił błąd podczas importu',\n          variant: 'destructive',\n        });\n      }\n    }\n  };\n\n  if (isLoading) {\n    return <div className=\"p-4\">Ładowanie...</div>;\n  }\n\n  return (\n    <div className=\"container mx-auto p-4 md:p-8 space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold\">Ustawienia</h1>\n        <p className=\"text-muted-foreground\">Konfiguracja firmy i aplikacji</p>\n      </div>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Dane firmy</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <form onSubmit={handleSave} className=\"space-y-4\">\n            <div>\n              <label className=\"text-sm font-medium\">Nazwa firmy</label>\n              <Input\n                value={formData.companyName}\n                onChange={(e) => setFormData({ ...formData, companyName: e.target.value })}\n                placeholder=\"Twoja Firma\"\n              />\n            </div>\n\n            <div>\n              <label className=\"text-sm font-medium\">Adres</label>\n              <Input\n                value={formData.companyAddress}\n                onChange={(e) => setFormData({ ...formData, companyAddress: e.target.value })}\n                placeholder=\"Warszawa, ul. Przykładowa 1\"\n              />\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <label className=\"text-sm font-medium\">NIP</label>\n                <Input\n                  value={formData.companyNip}\n                  onChange={(e) => setFormData({ ...formData, companyNip: e.target.value })}\n                  placeholder=\"1234567890\"\n                />\n              </div>\n              <div>\n                <label className=\"text-sm font-medium\">Telefon</label>\n                <Input\n                  type=\"tel\"\n                  value={formData.companyPhone}\n                  onChange={(e) => setFormData({ ...formData, companyPhone: e.target.value })}\n                  placeholder=\"+48 123 456 789\"\n                />\n              </div>\n            </div>\n\n            <div>\n              <label className=\"text-sm font-medium\">Email</label>\n              <Input\n                type=\"email\"\n                value={formData.companyEmail}\n                onChange={(e) => setFormData({ ...formData, companyEmail: e.target.value })}\n                placeholder=\"biuro@firma.pl\"\n              />\n            </div>\n\n            <div className=\"grid grid-cols-3 gap-4\">\n              <div>\n                <label className=\"text-sm font-medium\">Domyślny VAT (%)</label>\n                <select\n                  value={formData.defaultVatRate}\n                  onChange={(e) => setFormData({ ...formData, defaultVatRate: parseFloat(e.target.value) })}\n                  className=\"w-full h-10 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring\"\n                >\n                  <option value=\"0\">0%</option>\n                  <option value=\"8\">8%</option>\n                  <option value=\"23\">23%</option>\n                </select>\n              </div>\n              <div>\n                <label className=\"text-sm font-medium\">Waźność kosztorysu (dni)</label>\n                <Input\n                  type=\"number\"\n                  value={formData.quoteValidDays}\n                  onChange={(e) => setFormData({ ...formData, quoteValidDays: parseInt(e.target.value) || 30 })}\n                />\n              </div>\n              <div>\n                <label className=\"text-sm font-medium\">Waluta</label>\n                <Input\n                  value={formData.currency}\n                  onChange={(e) => setFormData({ ...formData, currency: e.target.value })}\n                />\n              </div>\n            </div>\n\n            <div className=\"flex justify-end\">\n              <Button type=\"submit\">\n                <Save className=\"mr-2 h-4 w-4\" />\n                Zapisz ustawienia\n              </Button>\n            </div>\n          </form>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Zarządzanie danymi</CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"grid gap-4 md:grid-cols-2\">\n            <Button\n              variant=\"outline\"\n              onClick={exportData}\n              className=\"w-full\"\n            >\n              <FileDown className=\"mr-2 h-4 w-4\" />\n              Eksportuj dane (JSON)\n            </Button>\n            <div>\n              <input\n                type=\"file\"\n                accept=\".json\"\n                onChange={handleImport}\n                className=\"hidden\"\n                id=\"import-file\"\n              />\n              <Button\n                variant=\"outline\"\n                onClick={() => document.getElementById('import-file')?.click()}\n                className=\"w-full\"\n              >\n                <FileUp className=\"mr-2 h-4 w-4\" />\n                Importuj dane (JSON)\n              </Button>\n            </div>\n          </div>\n\n          <Button\n            variant=\"outline\"\n            onClick={handleGenerateDemoData}\n            className=\"w-full\"\n          >\n            <Database className=\"mr-2 h-4 w-4\" />\n            Wygeneruj dane testowe\n          </Button>\n\n          <Button\n            variant=\"destructive\"\n            onClick={() => {\n              if (confirm('Czy na pewno chcesz usunąć WSZYSTKIE dane? Ta operacja jest nieodwracalna!')) {\n                if (confirm('Na pewno? Wszystkie dane zostaną trwale usunięte!')) {\n                  indexedDB.deleteDatabase('ServiceAppDB');\n                  window.location.reload();\n                }\n              }\n            }}\n            className=\"w-full\"\n          >\n            <Trash2 className=\"mr-2 h-4 w-4\" />\n            Usuń wszystkie dane\n          </Button>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/kuba-ai/service-manager/src/types/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/kuba-ai/service-manager/tailwind.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/kuba-ai/service-manager/vite.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
